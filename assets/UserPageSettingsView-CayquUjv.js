import{_ as P,f as V,g as U,r as f,D as R,B as F,j as M,c as t,d as z,a as r,k as p,n as _,b as I,w as B,v as C,F as v,m as L,C as T,o as l,z as W,t as h,u as j,h as A,K as E,i as K}from"./index-FYdH7f92.js";import{W as $}from"./WiNavbar-R8EHt1fp.js";import{u as q}from"./WiProfileStore-B77mN4kn.js";import"./GetUserData-BTGUAlWt.js";const G=[{name:"Аниме",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Рыбалка",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Танцы",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Хоббихорсинг",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Квадробинг",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Футбол",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Рисование",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Вышивание",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Фитнес",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Лего",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Паркур",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Кулинария",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Фотография",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Йога",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Плавание",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Велоспорт",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Программирование",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Чтение",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Гейминг",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Музыка",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Бег",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"},{name:"Садоводство",BgColor:"rgba(255, 255, 255, 1)",color:"rgba(0, 0, 0, 1)"}],H={class:"form__wrapper"},J={key:0,class:"profile__spinner"},O={class:"form__list"},Q={class:"form__badge__wrapper"},X=["onClick"],Y={__name:"UserPageSettingsView",setup(Z){const k=V(),y=T(),u=j(),c=q(),w=U(),g=f(!1),n=f(null),{user:oo,badges:i,skeletonLoad:ao}=R(c),{getProfileData:D}=c,e=F({name:"",about:"",badges:[]}),m=s=>e.badges.some(o=>o.name===s.name),x=s=>{const o=e.badges.findIndex(a=>a.name===s.name);o!==-1?e.badges.splice(o,1):e.badges.push(s)},S=()=>{u.back()},N=async()=>{g.value=!0,n.value=k.currentUser;const s=A(w,"users",n.value.uid),o=await E(s),a=o.exists()?o.data():{},b={displayName:e.name!==""?e.name:n.value.displayName||a.displayName,about:e.about!==""?e.about:n.value.about||a.about,badges:e.badges};try{await K(s,b),console.log("Профиль успешно обновлен")}catch(d){console.error("Ошибка при обновлении профиля:",d)}finally{g.value=!1}u.back()};return M(async()=>{await D(y.params.uid),e.badges=[...i.value]}),(s,o)=>(l(),t(v,null,[z($),r("div",H,[g.value?(l(),t("div",J)):p("",!0),_(i)?(l(),t("form",{key:1,class:"form",onSubmit:I(N,["prevent"])},[o[6]||(o[6]=r("h1",null,"Редактировать профиль",-1)),r("ul",O,[r("li",null,[o[2]||(o[2]=r("label",{for:"name"},"Имя:",-1)),B(r("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=a=>e.name=a),type:"text"},null,512),[[C,e.name]])]),r("li",null,[o[3]||(o[3]=r("label",{for:"about"},"Краткая информация:",-1)),B(r("textarea",{id:"about","onUpdate:modelValue":o[1]||(o[1]=a=>e.about=a),name:""},null,512),[[C,e.about]])]),r("li",null,[o[4]||(o[4]=r("label",{for:""},"Выберите интересы:",-1)),r("div",Q,[(l(!0),t(v,null,L(_(G),(a,b)=>(l(),t("div",{key:b,class:"form__badge",style:W({backgroundColor:m(a)?"#ffd859":a.BgColor,color:m(a)?"black":a.color}),onClick:d=>x(a)},h(a.name),13,X))),128))])])]),r("div",{class:"form__buttons"},[r("button",{class:"form__button form__button--decline",type:"button",onClick:S}," отмена "),o[5]||(o[5]=r("button",{class:"form__button form__button--save"}," сохранить изменения ",-1))])],32)):p("",!0)])],64))}},lo=P(Y,[["__scopeId","data-v-5b2678a7"]]);export{lo as default};
