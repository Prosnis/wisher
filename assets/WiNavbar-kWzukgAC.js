import{f as h,a1 as y,g as k,I as D,h as U,a2 as S,a3 as C,i as x,j as B,O as I,r as p,P as N,_ as b,u as W,l as $,q,o as l,c as _,a as n,B as g,G as f,n as r,p as d,z as w,t as A}from"./index-6jhAjEIq.js";async function O(){try{const s=h();await y(s),console.log("Пользователь разлогинен")}catch(s){console.error("Ошибка при разлогинивании:",s)}}const m=k();async function P(s){const t=await D(U(m,"users",s)),e=t.exists()?t.data():null;if(!e)return console.error("Пользователь не найден!"),{user:null,wishes:[]};const a=S(x(m,"wishes"),C("userId","==",s)),u=(await B(a)).docs.map(i=>({id:i.id,...i.data()}));return{user:e,wishes:u}}const V=h(),j=I("user",()=>{const s=p(null),t=p(null),e=async()=>{const{user:a}=await P(s.value);t.value=a};return N(V,a=>{a?(s.value=a.uid,e()):(s.value=null,t.value=null)}),{userUID:s,user:t}}),z={class:"nav"},E={key:0,class:"user__wrapper"},F=["src"],G={class:"user__name"},L={__name:"WiNavbar",setup(s){const t=W(),e=j();async function a(){await t.push(`${d.user}/${e.userUID}`)}const c=p(null),u=h();return $(async()=>{u.currentUser&&(c.value=await u.currentUser.uid)}),(i,o)=>{const v=q("router-link");return l(),_("nav",z,[o[3]||(o[3]=n("div",{class:"nav__empty"},null,-1)),c.value?(l(),g(v,{key:0,to:r(d).feed,class:"nav__logo"},{default:f(()=>o[1]||(o[1]=[n("span",null,"wisher",-1)])),_:1},8,["to"])):w("",!0),r(u).currentUser?(l(),_("div",{key:2,class:"user",onClick:a},[r(e).user?(l(),_("div",E,[n("img",{class:"user__img",src:r(e).user.photoUrl,alt:""},null,8,F),n("span",G,A(r(e).user.displayName),1),n("button",{onClick:o[0]||(o[0]=M=>r(O)())}," выйти ")])):w("",!0)])):(l(),g(v,{key:1,class:"user",to:r(d).register},{default:f(()=>o[2]||(o[2]=[n("span",null,"войти",-1)])),_:1},8,["to"]))])}}},R=b(L,[["__scopeId","data-v-7438e11c"]]);export{R as W,P as g,j as u};
