import{f as h,a1 as y,g as k,I as D,h as U,a2 as S,a3 as C,i as b,j as x,O as B,r as p,P as I,_ as N,u as W,l as $,q,o as l,c as d,a as n,B as g,G as w,n as r,p as _,z as f,t as A}from"./index-CIa3Xx9T.js";async function O(){try{const s=h();await y(s),console.log("Пользователь разлогинен")}catch(s){console.error("Ошибка при разлогинивании:",s)}}const m=k();async function P(s){const t=await D(U(m,"users",s)),e=t.exists()?t.data():null;if(!e)return console.error("Пользователь не найден!"),{user:null,wishes:[]};const a=S(b(m,"wishes"),C("userId","==",s)),u=(await x(a)).docs.map(i=>({id:i.id,...i.data()}));return{user:e,wishes:u}}const V=h(),j=B("user",()=>{const s=p(null),t=p(null),e=async()=>{const{user:a}=await P(s.value);t.value=a};return I(V,a=>{a?(s.value=a.uid,e()):(s.value=null,t.value=null)}),{userUID:s,user:t}}),z={class:"nav"},E={key:0,class:"user__wrapper"},F=["src"],G={class:"user__name"},L={__name:"WiNavbar",setup(s){const t=W(),e=j();async function a(){await t.push(`${_.user}/${e.userUID}`),window.location.reload()}const c=p(null),u=h();return $(async()=>{u.currentUser&&(c.value=await u.currentUser.uid)}),(i,o)=>{const v=q("router-link");return l(),d("nav",z,[o[3]||(o[3]=n("div",{class:"nav__empty"},null,-1)),c.value?(l(),g(v,{key:0,to:r(_).feed,class:"nav__logo"},{default:w(()=>o[1]||(o[1]=[n("span",null,"wisher",-1)])),_:1},8,["to"])):f("",!0),r(u).currentUser?(l(),d("div",{key:2,class:"user",onClick:a},[r(e).user?(l(),d("div",E,[n("img",{class:"user__img",src:r(e).user.photoUrl,alt:""},null,8,F),n("span",G,A(r(e).user.displayName),1),n("button",{onClick:o[0]||(o[0]=M=>r(O)())}," выйти ")])):f("",!0)])):(l(),g(v,{key:1,class:"user",to:r(_).register},{default:w(()=>o[2]||(o[2]=[n("span",null,"войти",-1)])),_:1},8,["to"]))])}}},R=N(L,[["__scopeId","data-v-0eb9497e"]]);export{R as W,P as g,j as u};
