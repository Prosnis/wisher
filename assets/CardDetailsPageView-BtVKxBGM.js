import{_ as P,g as V,e as B,r as o,j as A,D as E,f as w,c as _,h as m,a as s,w as U,G as C,E as x,l as p,t as g,k as F,F as G,H as S,i as I,A as R,o as c}from"./index-CWayI_7h.js";import{W as T}from"./WiNavbar-B2Tb-diI.js";import{g as k}from"./GetUserData-U0EVY8MB.js";const W="/wisher/assets/ozon-DIAmpGYW.png",$="/wisher/assets/wb-_uZB1mgy.png",z="/wisher/assets/ym-I_fhSRkn.png",H="/wisher/assets/reserved-DQT6e_Tb.png",j="/wisher/assets/free-CiGHR2cu.png",q={class:"card"},L={class:"card__user__info skeleton-loader"},M={class:"card__user__info"},Q={class:"card__img-wrapper--avatar"},Y=["src"],Z={key:0},J=["href"],K={key:1},O={class:"card__wrapper"},X={class:"card__images"},ss={class:"card__description"},es={class:"card__img__wrapper--description"},as=["src"],ts={class:"card__links"},rs={class:"card__links-wrapper"},os={class:"card__links--item"},is=["href"],ns={class:"card__links--item"},ls=["href"],_s={class:"card__links--item"},cs=["href"],ds={class:"card__description__info"},us={class:"card__description__user"},vs={class:"card__description--actions"},ms={key:0,class:"card__description--reserved"},ps={key:1,class:"card__description--reserved"},gs={__name:"CardDetailsPageView",setup(hs){const h=V(),f=B(),d=o(!1),a=o({}),N=S(),u=o({}),b=o(!1),i=o(!1),v=o(""),n=o({});A(async()=>{d.value=!0;const l=N.params.uid,e=await E(w(h,"wishes",l)),t=e.exists()?e.data():null;try{if(t){a.value=t,v.value=t.reserve||"",i.value=!!t.reserve;const r=await k(t.userId);u.value=r.user}if(t.reserve){const r=await k(t.reserve);n.value=r.user;const D=f.currentUser;D&&D.uid===n.value.uid&&(b.value=!0)}}catch(r){console.log(r)}finally{d.value=!1}});async function y(){const l=f.currentUser,e=await k(l.uid);i.value&&v.value===l.uid?(await I(w(h,"wishes",a.value.id),{reserve:""}),v.value="",i.value=!1,n.value={}):i.value||(await I(w(h,"wishes",a.value.id),{reserve:f.currentUser.uid}),v.value=l.uid,i.value=!0,n.value=e.user)}return(l,e)=>{const t=R("router-link"),r=R("font-awesome-icon");return c(),_(G,null,[m(T),s("div",q,[U(s("div",L,null,512),[[C,d.value]]),U(s("div",null,[s("div",M,[s("div",Q,[s("img",{class:"card__image card__image--user",src:u.value.photoUrl,alt:""},null,8,Y)]),m(t,{to:{name:"UserProfile",params:{uid:u.value.uid}},class:"card__user-name"},{default:x(()=>[p(g(u.value.displayName),1)]),_:1},8,["to"]),a.value.link?(c(),_("span",Z,[e[0]||(e[0]=p(" поделился ссылкой ")),s("a",{href:a.value.link,target:"_blank",rel:"noopener noreferrer"},[m(r,{icon:["fas","up-right-from-square"]})],8,J)])):(c(),_("span",K,"не указал ссылку"))]),s("div",O,[s("div",X,[s("div",ss,[s("div",es,[s("img",{class:"card__image card__image--description",src:a.value.img,alt:""},null,8,as)])]),s("div",ts,[e[4]||(e[4]=s("h3",null,"Найти на маркетплейсах",-1)),s("div",rs,[s("div",os,[s("a",{href:`https://www.ozon.ru/search/?from_global=true&text=${encodeURIComponent(a.value.name)}`,target:"_blank"},e[1]||(e[1]=[s("img",{class:"card__image card__links--img",src:W,alt:""},null,-1)]),8,is)]),s("div",ns,[s("a",{href:`https://www.wildberries.ru/catalog/0/search.aspx?search=${encodeURIComponent(a.value.name)}`,target:"_blank"},e[2]||(e[2]=[s("img",{class:"card__image card__links--img",src:$,alt:""},null,-1)]),8,ls)]),s("div",_s,[s("a",{href:`https://market.yandex.ru/search?text=${encodeURIComponent(a.value.name)}`,target:"_blank"},e[3]||(e[3]=[s("img",{class:"card__image card__links--img",src:z,alt:""},null,-1)]),8,cs)])])])]),s("div",ds,[s("div",us,[s("h1",null,g(a.value.name),1),s("span",null,g(a.value.description),1)]),s("div",vs,[i.value?(c(),_("div",ms,[b.value?(c(),_("button",{key:0,class:"card__button card__button-free",onClick:y}," отказаться ")):F("",!0),e[6]||(e[6]=s("div",null,[s("img",{class:"card__description--stamp",src:H,alt:""})],-1)),s("span",null,[e[5]||(e[5]=p("Зарезервировано пользователем ")),m(t,{to:{name:"UserProfile",params:{uid:n.value.uid}},class:"card__user-name"},{default:x(()=>[p(g(n.value.displayName),1)]),_:1},8,["to"])])])):(c(),_("div",ps,[s("button",{class:"card__button card__button-reserved",onClick:y}," зарезервировать "),e[7]||(e[7]=s("img",{class:"card__description--stamp",src:j,alt:""},null,-1)),e[8]||(e[8]=s("span",null,"Pарезервируйте этот подарок, если хотите его подарить.",-1))]))])])])],512),[[C,!d.value]])])],64)}}},bs=P(gs,[["__scopeId","data-v-769616a2"]]);export{bs as default};
